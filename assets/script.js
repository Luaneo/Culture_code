modals = {
    kolh4: `<h3>ул. Колхозная 4</h3>
    <article>
        <header>
            <h1>«Чашки»</h1>
            <h2>Мауро Патта</h2>
        </header>
        <p>
            Уличный художник, очарованный своей родиной, Сардинией. С
            2014 года он начал свой путь в искусстве настенной живописи,
            которое стало его основным способом самовыражения. Вкус
            художника воспитывался во Флоренции, раньше он работал он по
            фарфору, однажды он заинтересовался муралами, так его
            творения стали намного больше и заметнее.
        </p>
        <p>
            «Несколько лет назад я был в России, и первое, что я
            заметил, – это важность чая в повседневной жизни каждой
            российской семьи. За несколько столетий до настоящего
            времени чай стал основополагающим элементом русской культуры
            и прошел через время, завоевав все социальные слои. Поэтому
            девушка, одетая в богатый боярский костюм, держит чайные
            чашки так, чтобы они напоминали песочные часы», – рассказал
            о своей задумке Муаро Патта.
        </p>
        <p>
            14-ти этажный фасад Мауро разрисовывал вместе со своей
            русской супругой Марией!
        </p>
    </article>
    <img src="../images/Murals/kolh4-main.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА КОЛХОЗНОЙ 4" class="img-main" />
    <button data-close-button class="close-button">
        ЗАКРЫТЬ &times;
    </button>
    <img src="../images/Murals/kolh4-aside.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА КОЛХОЗНОЙ 4" class="img-aside" />`,
    kolh8: `<h3>ул. Колхозная 8</h3>
    <article>
        <header>
            <h1>«Русская женщищна»</h1>
            <h2>Фарид Руэда</h2>
        </header>
        <p>
            Яркий фасад расположившийся прямо за стадионом «Орион» —
            работа мексиканского художника и уже резидента «Культурного
            кода» Фарида Руэда.
        </p>
        <p>
            Фарид Руэда, мексиканский художник-монументалист, творит в
            стиле поп-сюрреализма, создает красочные образы животных, в
            основе его творчества лежит народная культура его страны с
            многочисленными легендами, преданиями и стихами. Образом
            девушки он хотел показать красоту и силу русских женщин.
            Фарид восхищен их красотой, а Россия для него самого —
            символ гостеприимства.
        </p>
        <p>
            «Мой мурал — дань русской культуре, ее людям, ее флоре и
            фауне. Женщина представляет землю, как любящая мать, которая
            обеспечивает свой народ пищей и создаёт уют в доме. Так же
            как матушка-земля, населенная различными животными, которую
            люди с любовью приняли и чувствуют себя сближенными с ней.
            Ткани платья украшены русскими узорами и цветами. Они, в
            сочетании с цветами российского флага, которые добавлены в
            этот тотем, символизируют женственность».
        </p>
    </article>
    <img src="../images/Murals/kolh8-main.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА КОЛХОЗНОЙ 8" class="img-main" />
    <button data-close-button class="close-button">
        ЗАКРЫТЬ &times;
    </button>
    <img src="../images/Murals/kolh8-aside.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА КОЛХОЗНОЙ 8" class="img-aside" />`,
    lug2_mon: `<h3>ул. Луговая 2/1</h3>
    <article>
        <header>
            <h1>«Доживём до понедельника»</h1>
            <h2>Сергей Юраков</h2>
        </header>
        <p>
            В основу мурала легли персонажи кинокартины «Доживём до
            понедельника» режиссера Станислава Ростоцкого, он о
            непростых взаимоотношениях школьных учителей и учеников. В
            фильме затронуты темы, волнующие не первое поколение людей,
            поднимаются вопросы нравственности, культуры, этики и
            достоинства. Каждый из нас рассуждал на тему, что такое
            счастье. «По-моему, это когда тебя понимают» – написал
            персонаж картины Гена Шестопал в своем сочинении. Теперь
            поискать ответ на этот вопрос художник предлагает зрителю.
        </p>
        <p>
            Сергей Юраков родился в микрорайоне Железнодорожный в
            Балашихе. Росписью стен занимается с 2006 года. В настоящее
            время стал участником Международного фестиваля уличного
            искусства «Культурный код».
        </p>
    </article>
    <img src="../images/Murals/lug2-mon-main.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА ЛУГОВОЙ 2/1" class="img-main" />
    <button data-close-button class="close-button">
        ЗАКРЫТЬ &times;
    </button>
    <img src="../images/Murals/lug2-mon-aside.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА ЛУГОВОЙ 2/1" class="img-aside" />`,
    pion31: `<h3>ул. Пионерская 31</h3>
    <article>
        <header>
            <h1>«Девочка на дереве»</h1>
            <h2>Деян Иванович</h2>
        </header>
        <p>
            Сербский художник окончил Белградский политехнический
            институт по специальности графический дизайн. С 2007 года
            активно занимается росписью стен и продолжает повышать
            уровень и качество своих работ, одновременно формируя
            характерный стиль. В 2016 году заинтересовался масляной
            живописью, исследованию и совершенствованию техники в целом.
            В настоящее время его привлекают две темы: детство и
            традиции.
        </p>
        <p>
            «В основу мурала легла старая фотография девушки из моего
            района. Это сцена из моего детства, воспоминание, как она
            ест вишню. Для меня детство — самое прекрасное время в
            жизни, поэтому я хотел поделиться этим моментом и передать
            его атмосферу», — рассказал художник.
        </p>
        <p>
            «Для меня очень важно быть на этом фестивале, потому что я
            считаю, что это один из самых лучших фестивалей в мире.
            Много больших имен и крутых художников рисуют здесь. Мне
            приятно быть среди них»
        </p>
    </article>
    <img src="../images/Murals/pion31-main.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА ПИОНЕРСКОЙ 31" class="img-main" />
    <button data-close-button class="close-button">
        ЗАКРЫТЬ &times;
    </button>
    <img src="../images/Murals/pion31-aside.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА ПИОНЕРСКОЙ 31" class="img-aside" />`,
    pion29_hiv: `<h3>ул. Пионерская 29</h3>
    <article>
        <header>
            <h1>«ВИЧ»</h1>
            <h2>Саша Купалян</h2>
        </header>
        <p>
            Саша Купаян В своих работах обращается к вечным темам, навсегда запечатленным в нашей исторической
            памяти, так и на фестивале он создал мурал, посвященный Фонду «СПИД.ЦЕНТР» и борьбе с ВИЧ.
        </p>
        <p>
            «Мурал состоит из десятков пазлов, среди которых выделяется логотип Фонда — красный конь с разными
            персонажами. Мне действительно хочется поддержать врачей, а также людей, которые работают в Фонде и
            которые получают от него помощь. Люди до сих пор очень мало знают о ВИЧ, сколько из них уверены, что
            вирус передается воздушно-капельным путем! Но чем больше мы будем говорить о нем, тем больше людей
            узнают правильную информацию», — рассказал художник.
        </p>
        <p>
            Кстати, общая площадь работы составила примерно 480 квадратных метров, это самый большой мурал на эту
            тему в мире! Художник намеренно выбрал для мурала яркие цвета, «чтобы вывести эту проблему из серой зоны
            и привлечь к ней внимание людей».
        </p>
    </article>
    <img src="../images/Murals/pion29-hiv-main.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА ПИОНЕРСКОЙ 29" class="img-main" />
    <button data-close-button class="close-button">
        ЗАКРЫТЬ &times;
    </button>
    <img src="../images/Murals/pion29-hiv-aside.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА ПИОНЕРСКОЙ 29" class="img-aside" />`,
    lug2_gor: `<h3>ул. Луговая 2</h3>
    <article>
        <header>
            <h1>«Гора»</h1>
            <h2>Илья Робе</h2>
        </header>
        <p>
            Илья Робе начал увлекаться граффити в 1997 году. В своих работах художник размышляет на тему духовных
            ценностей и оценки времени, которое человек должен проводить наедине с природой, вдохновляется он своими
            впечатлениями от экспедиции на Эльбрус, именно поэтому ему близка тема горного пейзажа.
        </p>
        <p>
            «Идея мурала лежит в понимании скорости и честности в их прямом и философском смысле. Как автор своей
            жизни, художник рассуждает о заложенном и пережитом, о мимолётности мгновений и ощущений, которые
            приходят к нам словно дуновение ветра. Это утверждение того, что ничто не вечно, незабвенны лишь только
            мысли и взгляды, которые сквозь века переносят нас в разные эпохи», — рассказал художник.
        </p>
        <p>
            Кстати, эта работа — лишь часть серии изображений под названием «Край Земли».
        </p>
    </article>
    <img src="../images/Murals/lug2-gor-main.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА ЛУГОВОЙ 2" class="img-main" />
    <button data-close-button class="close-button">
        ЗАКРЫТЬ &times;
    </button>
    <img src="../images/Murals/lug2-gor-aside.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА ЛУГОВОЙ 2" class="img-aside" />`,
    pion29_run: `<h3>ул. Пионерская 29</h3>
    <article>
        <header>
            <h1>«Бесконечный бег»</h1>
            <h2>Филипп Думальченко</h2>
        </header>
        <p>
            Петербургский художник Филлип Думальченко FI2K не ищет легких путей, поэтому для создания мурала он
            вырезал вручную 150 двухметровых трафаретов, на это у него ушло около двух недель.
        </p>
        <p>
            «В своих работах я часто использую образы животных: лошадей и борзых. Меня привлекает их грация, сила,
            свобода. В этом мурале они запечатлены в бесконечном беге. Как и люди, они постоянно бегут к цели, но
            она так же непостижима, как и мы сами. В этой погоне мы постоянно что-то преодолеваем и постоянно от
            чего-то уходим. А тем временем вокруг все движется, изменяется, что-то рождается и умирает, и от этого
            непрерывно меняется мир. Мы начали заниматься с женой верховой ездой, поэтому я изобразил коней, они
            бегут куда-то. Куда бегут, зачем бегут, догонят свою цель или нет, неизвестно. Загадка в конце. Не
            хочется сводить всё к цитате «У самурая нет цели, есть только путь», но она мне близка здесь», —
            объяснил Филипп Думальченко название рисунка.
        </p>
        <p>
            Кстати, если правильно встать у фасада с лошадьми, можно будет увидеть зайчика под балконом соседнего
            дома! Чтобы сориентироваться, ищите метки на асфальте рядом с муралами.
        </p>
    </article>
    <img src="../images/Murals/pion29-run-main.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА КОЛХОЗНОЙ 4" class="img-main" />
    <button data-close-button class="close-button">
        ЗАКРЫТЬ &times;
    </button>
    <img src="../images/Murals/pion29-run-aside.png" alt="ИЗОБРАЖЕНИЕ МУРАЛА НА КОЛХОЗНОЙ 4" class="img-aside" />`
}

const openModalButton = document.querySelectorAll('.map-point')

openModalButton.forEach(button => {
    button.addEventListener('click', () => {
        const modal = document.querySelector(button.dataset.modalTarget)
        openModal(modal)
    })
});

function openModal(modal) {
    if (modal == null) return
    modal.innerHTML = modals[modal.id.replace('-', '_')];
    modal.classList.add('active');
    const closeButton = document.querySelector('.close-button')
    closeButton.addEventListener('click', () => {
        closeModal(modal);
    });
};

function closeModal(modal) {
    if (modal == null) return;
    modal.classList.remove('active');
    setTimeout(() => {
        modal.innerHTML = '';
    }, 600);
};

dataset = [
    {author: 'мауро патта', mural_name: 'чашки', mural_id:'kolh4', address:'ул. колхозная 4', keywords: 'мурал колхозная женщина сардиния флоренция супруга мария'},
    {author: 'фарид руэда', mural_name: 'русская женщина', mural_id: 'kolh8', address: 'ул. колхозная 8', keywords: 'мурал'},
    {author: 'сергей юраков', mural_name: 'доживем до понедельника', mural_id: 'lug2-mon', address: 'луговая 2/1', keywords: 'мурал'},
    {author: 'деян иванович', mural_name: 'девочка на дереве', mural_id: 'pion31', address: 'ул. пионерская 31', keywords: 'мурал'},
    {author: 'саша купалян', mural_name: 'вич', mural_id: 'pion29-hiv', address: 'ул. пионерская 29', keywords: 'мурал'},
    {author: 'илья робе', mural_name: 'гора', mural_id: 'lug2-gor', address: 'ул. луговая 2', keywords: 'мурал'},
    {author: 'Филипп Думальченко', mural_name: 'бесконечный бег', mural_id: 'pion29-run', address: 'ул. пионерская 29', keywords: 'мурал'},
    // {author, mural_name, mural_id, address, keywords},
    // {author, mural_name, mural_id, address, keywords},
    // {author, mural_name, mural_id, address, keywords}
];

const form = document.querySelector('form');
const input = document.querySelector('#searchbar');
const results = document.querySelector('#search-results');

form.addEventListener('submit', el => {
    el.preventDefault();
    const keyword = input.value.trim().toLowerCase();
    console.log(keyword);
    const filteredData = dataset.filter(item => 
        item.author.toLowerCase().includes(keyword) || item.mural_name.toLowerCase().includes(keyword) || item.mural_id.toLowerCase().includes(keyword) || item.address.toLowerCase().includes(keyword) || item.keywords.includes(keyword)
    );
    console.log(filteredData);
    displayResults(filteredData);
});

const displayResults = (data) => {
    results.innerHTML = '';
    data.forEach(item => {
        const button = document.createElement('button')
        button.innerHTML = `${item.address}: "${item.mural_name}" - ${item.author}`
        button.dataset.modalTarget = `#${item.mural_id}`
        button.addEventListener('click', () => {
            const modal = document.querySelector(button.dataset.modalTarget)
            openModal(modal)
        });
        // button.addEventListener('mouseover', () => {
        //     point = document.querySelector(`.map-point[data-modal-target="${button.dataset.modalTarget}`)
        //     console.log(point);
        //     point.classList.add('active');
        //     console.log('mouseover');
        // });
        // button.addEventListener('mouseout', () => {
        //     point = document.querySelector(`.map-point[data-modal-target="${button.dataset.modalTarget}`)
        //     console.log(point);
        //     point.classList.remove('active');
        //     console.log('mouseout');
        // });
        const li = document.createElement('li')
        li.appendChild(button)
        results.appendChild(li)
    });
};
